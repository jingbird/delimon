# Issue #15: プロフィール編集画面の実装

### 背景 / 目的
設定メニューからプロフィール情報を編集できる画面を実装し、ユーザーが自分の情報を更新できるようにする。

- **依存**: #14
- **ラベル**: `frontend`, `feature`

---

### スコープ / 作業項目

#### 1. プロフィール編集画面のUI作成
- `app/settings/profile-edit.tsx` を作成
- プロフィール設定画面と同じフォームコンポーネントを使用

#### 2. 既存プロフィール情報の表示
- 画面表示時にSupabaseから現在のプロフィール情報を取得
- フォームに既存値を表示
- 識別番号は表示のみで編集不可（グレーアウト）

#### 3. 変更検知
- 入力内容に変更がある場合のみ保存ボタンを有効化
- 変更がない場合は保存ボタンを無効化

#### 4. 変更破棄確認
- 変更ありで戻るボタンタップ時に「変更を破棄しますか？」確認ダイアログ表示
- 「はい」で設定メニューへ戻る、「いいえ」でプロフィール編集画面に留まる

#### 5. プロフィール情報の更新
- 保存ボタンタップで `users` テーブルをUPDATE
- 更新成功後に「保存しました」トーストメッセージ表示
- 設定メニューへ戻る

#### 6. エラーハンドリング
- ネットワークエラー時に「保存に失敗しました」ダイアログ表示
- バリデーションエラーをフィールド下に表示

---

### ゴール / 完了条件（Acceptance Criteria）

- [ ] `app/settings/profile-edit.tsx` でプロフィール編集画面のUI作成完了
- [ ] 既存プロフィール情報を表示できる（識別番号は表示のみで編集不可）
- [ ] 入力内容に変更がある場合のみ保存ボタンを有効化できる
- [ ] 変更ありで戻るボタンタップ時に「変更を破棄しますか？」確認ダイアログ表示
- [ ] 保存成功後に「保存しました」メッセージ表示→設定メニューへ戻る

---

### テスト観点

#### 手動テスト
- 画面表示時に既存のプロフィール情報が表示されることを確認
- 識別番号が編集不可（グレーアウト）であることを確認
- ニックネームを変更した場合、保存ボタンが有効化されることを確認
- 変更なしで保存ボタンが無効化されていることを確認
- 変更ありで戻るボタンをタップし、確認ダイアログが表示されることを確認
- 保存ボタンタップ後、Supabase Dashboardで `users` テーブルが更新されていることを確認
- 「保存しました」トーストメッセージが表示されることを確認

#### 検証方法
1. 設定メニューからプロフィール編集画面へ遷移
2. 既存のプロフィール情報が表示されることを確認
3. ニックネームを変更し、保存ボタンが有効化されることを確認
4. 戻るボタンをタップし、確認ダイアログが表示されることを確認
5. 再度ニックネームを変更し、保存ボタンをタップ
6. 「保存しました」トーストメッセージが表示されることを確認
7. Supabase Dashboardで `users` テーブルが更新されていることを確認

---

### 参考資料

- `docs/05_sitemap_delimon.md` - サイトマップ（プロフィール編集画面）
- `docs/06_screen_transition_delimon.md` - 画面遷移図（設定フロー）

---

### 要確認事項

- 識別番号の再生成を許可するか（Phase 1では不可）
- ニックネーム変更時に識別番号を再生成するか
- メールアドレスの変更を許可するか（Phase 1では不可）
