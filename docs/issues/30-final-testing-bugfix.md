# Issue #30: 最終テスト・バグ修正

### 背景 / 目的
実機での総合テストを実施し、発見されたバグを修正してMVPを完成させる。

- **依存**: 全Issue完了後（#1〜#29）
- **ラベル**: `test`, `bugfix`

---

### スコープ / 作業項目

#### 1. GPS計測の精度確認
- Android・iOS実機で実際に移動してテスト
- 走行距離が実際の距離とおおよそ一致することを確認（誤差±10%以内）
- バックグラウンド実行時も計測が継続されることを確認

#### 2. バッテリー消費の確認
- バックグラウンド実行時のバッテリー消費を測定
- 1時間で5%以内が目標
- 消費が多い場合は位置情報取得間隔を調整

#### 3. 全画面遷移フローの確認
以下のフローをすべてテスト:
- **初回ユーザーフロー**: チュートリアル→キャラクター選択→サインアップ→プロフィール設定→ホーム
- **既存ユーザーフロー**: スプラッシュ→ホーム
- **配送フロー**: ホーム→配送開始→配送終了→配送結果→ホーム
- **進化フロー**: 配送結果→進化を見る→進化アニメーション→ホーム
- **設定フロー**: ホーム→設定→各種設定画面→ホーム

#### 4. エラーケースのテスト
- ネットワークエラー時の挙動
- GPS権限拒否時の挙動
- 不正な入力値のバリデーション
- セッション切れ時の挙動

#### 5. バグ修正
- テスト中に発見されたバグをすべて修正
- 修正後に再テスト

#### 6. 設計書との整合性確認
- `docs/` 配下の設計書と実装内容を照合
- 仕様漏れがないか確認
- 設計書と実装が異なる場合は設計書を更新

#### 7. ストア申請準備
- スクリーンショット撮影（5〜8枚）
- アプリ説明文の作成
- プライバシーポリシー・利用規約の最終確認
- EAS Buildで本番ビルドを作成

---

### ゴール / 完了条件（Acceptance Criteria）

- [ ] Android・iOS実機でGPS計測の精度確認完了（実際に移動してテスト）
- [ ] バックグラウンド実行時のバッテリー消費確認完了（1時間で5%以内）
- [ ] 全画面遷移フローの確認完了（初回ユーザー、既存ユーザー、各種エラーケース）
- [ ] 発見されたバグをすべて修正完了
- [ ] `docs/` 配下の設計書との整合性確認完了（仕様漏れがないか）
- [ ] ストア申請用のスクリーンショット・説明文を準備完了

---

### テスト観点

#### 総合テスト項目
1. **認証・プロフィール**
   - サインアップ→プロフィール設定→ホーム
   - ログイン→ホーム
   - ログアウト→ログイン画面

2. **GPS・配送**
   - 配送開始→実際に移動→配送終了
   - バックグラウンド実行中の計測
   - GPS精度が低い環境での警告表示

3. **経験値・レベル・進化**
   - 配送終了→経験値獲得→レベルアップ
   - レベル20到達→進化バッジ表示→進化アニメーション
   - ホーム画面で進化後キャラクター表示

4. **図鑑・履歴**
   - 図鑑で相棒キャラクター表示
   - 履歴で配送記録表示
   - 期間別フィルタリング

5. **設定**
   - プロフィール編集
   - 通知設定
   - アカウント削除

6. **エラーハンドリング**
   - ネットワークエラー
   - GPS権限エラー
   - バリデーションエラー

---

### 参考資料

- `docs/01_requirements_delimon.md` - 要件定義（MVP機能）
- `docs/06_screen_transition_delimon.md` - 画面遷移図（全フロー）

---

### 要確認事項

- テスト実施者（開発者本人、外部テスター）
- テスト期間（1週間程度）
- ストア申請のスケジュール
- リリース判定基準（どの程度のバグまで許容するか）
